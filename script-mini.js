document.addEventListener("DOMContentLoaded",(function(){const e=e=>document.querySelector(e),t=e=>document.querySelectorAll(e),o=e(".stat-item h2");if(o){let e=parseInt(localStorage.getItem("visitorCount")||"0")+1;localStorage.setItem("visitorCount",e),o.textContent=e.toLocaleString()}const n=t(".skill-circle");if(n.length>0){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const o=parseInt(t.target.dataset.percentage),n=t.target.querySelector(".circle-progress"),s=t.target.querySelector(".skill-percentage"),a=283,c=e=>e>=80?"#28a745":e>=60?"#ffc107":e>=40?"#fd7e14":"#dc3545";n.style.transition="stroke-dashoffset 1.5s ease-in-out, stroke 0.5s ease",n.style.strokeDashoffset=a-o/100*a,n.style.stroke=c(o),s.textContent=`${o}%`,s.style.opacity=1,e.unobserve(t.target)}}))}),{threshold:.5});n.forEach((t=>{t.querySelector(".circle-progress").style.strokeDashoffset="283",t.querySelector(".skill-percentage").style.opacity="0",e.observe(t)}))}const s=e("#contactForm");if(s){const t=s.querySelector(".btn"),o=["name","email","subject","message"],n=()=>{const n=o.every((t=>e(`#${t}`).value.trim()));return t.disabled=!n,n};s.addEventListener("input",n),window.sendEmail=()=>{if(!n())return void alert("Please fill in all fields before sending.");const[a,c,r,i]=o.map((t=>e(`#${t}`).value.trim())),l=`Hello Ankit,\n\nYou have received a new message from your portfolio contact form:\n\nðŸ”¹ Name: ${a}\nðŸ”¹ Email: ${c}\nðŸ”¹ Subject: ${r}\n\nðŸ“© Message:\n${i}\n\nBest Regards,\n${a}`;window.location.href=`mailto:ankitsingh10a@gmail.com?subject=${encodeURIComponent(r)}&body=${encodeURIComponent(l)}`,s.reset(),t.disabled=!0},n()}const a=t("section"),c=t(".sidebar nav ul li a");if(a.length>0&&c.length>0){const t=()=>{let e="";const t=window.scrollY+100;a.forEach((o=>{const n=o.offsetTop,s=o.offsetHeight;t>=n&&t<n+s&&(e=o.id)})),c.forEach((t=>{const o=t.getAttribute("href").substring(1);t.classList.toggle("active",o===e)}))};window.addEventListener("scroll",t),t(),c.forEach((t=>{t.addEventListener("click",(o=>{o.preventDefault();const n=e(t.getAttribute("href"));n&&n.scrollIntoView({behavior:"smooth"})}))}))}const r=e(".menu-toggle"),i=e(".sidebar");r&&i&&(r.addEventListener("click",(()=>{i.classList.toggle("active"),r.classList.toggle("active")})),document.addEventListener("click",(e=>{i.contains(e.target)||r.contains(e.target)||(i.classList.remove("active"),r.classList.remove("active"))})));const l=e(".back-to-top");if(l){const e=()=>{const e=window.scrollY>200;l.style.opacity=e?"1":"0",l.style.pointerEvents=e?"auto":"none"};window.addEventListener("scroll",e),l.addEventListener("click",(()=>window.scrollTo({top:0,behavior:"smooth"})))}const d=e(".dark-mode-toggle");d&&d.addEventListener("click",(()=>{document.body.classList.toggle("dark-mode");const e=d.querySelector("i"),t=d.querySelector("span");document.body.classList.contains("dark-mode")?(e.classList.replace("fa-moon","fa-sun"),t.textContent="Light Mode"):(e.classList.replace("fa-sun","fa-moon"),t.textContent="Dark Mode")})),particlesJS("particles-js",{particles:{number:{value:50,density:{enable:!0,value_area:800}},color:{value:"#b97c50"},shape:{type:"circle"},opacity:{value:.5,random:!0},size:{value:3,random:!0},move:{enable:!0,speed:2,direction:"none",random:!0}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!0,mode:"push"}},modes:{repulse:{distance:100},push:{particles_nb:4}}},retina_detect:!0});const u=e(".hero");u&&(u.addEventListener("mousemove",(e=>{const t=u.getBoundingClientRect(),o=(e.clientX-t.left)/t.width*100,n=(e.clientY-t.top)/t.height*100;u.style.backgroundPosition=`${o}% ${n}%`})),u.addEventListener("mouseleave",(()=>{u.style.backgroundPosition="0% 50%"})))}));